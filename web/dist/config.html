<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统配置 - NSFW-GO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="static/css/design-system.css">
    <link rel="stylesheet" href="static/css/components.css">
</head>

<body class="bg-dark text-main font-sans antialiased selection:bg-primary selection:text-white">
    <div class="flex h-screen overflow-hidden">
        <!-- 侧边栏容器 -->
        <div id="sidebar-container"></div>

        <!-- 主内容区 -->
        <div class="flex-1 flex flex-col h-screen overflow-hidden relative">
            <!-- 顶部装饰 -->
            <div
                class="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-primary/5 to-transparent pointer-events-none z-0">
            </div>

            <!-- 滚动内容区 -->
            <main class="flex-1 overflow-y-auto relative z-10 custom-scrollbar p-6 lg:p-10">
                <div class="max-w-7xl mx-auto">
                    <!-- 页面标题 -->
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                        <div>
                            <h1 class="text-3xl font-bold tracking-tight text-white mb-2">系统配置</h1>
                            <p class="text-muted">管理服务器、数据库、爬虫及其他核心设置</p>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="loadConfig()" class="btn btn-secondary">
                                <i class="fas fa-sync-alt mr-2"></i>重置更改
                            </button>
                            <button onclick="saveConfig()" class="btn btn-primary">
                                <i class="fas fa-save mr-2"></i>保存配置
                            </button>
                        </div>
                    </div>

                    <!-- 配置分类导航 -->
                    <div class="flex overflow-x-auto pb-2 mb-6 gap-2 no-scrollbar" id="config-tabs">
                        <button onclick="switchTab('server')"
                            class="config-tab active px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all bg-white/10 text-white hover:bg-white/20">
                            <i class="fas fa-server mr-2"></i>服务器
                        </button>
                        <button onclick="switchTab('database')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-database mr-2"></i>数据库
                        </button>
                        <button onclick="switchTab('crawler')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-spider mr-2"></i>爬虫
                        </button>
                        <button onclick="switchTab('media')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-photo-video mr-2"></i>媒体库
                        </button>
                        <button onclick="switchTab('download')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-download mr-2"></i>下载
                        </button>
                        <button onclick="switchTab('notification')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-bell mr-2"></i>通知
                        </button>
                        <button onclick="switchTab('security')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-shield-alt mr-2"></i>安全
                        </button>
                        <button onclick="switchTab('advanced')"
                            class="config-tab px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all text-muted hover:text-white hover:bg-white/5">
                            <i class="fas fa-cogs mr-2"></i>高级
                        </button>
                    </div>

                    <!-- 服务器配置 -->
                    <div id="server-section" class="config-section active space-y-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-server text-primary mr-3"></i>HTTP 服务器设置
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">监听地址 (Host)</label>
                                    <input type="text" id="server-host"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="0.0.0.0">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">端口 (Port)</label>
                                    <input type="number" id="server-port"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="8080">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">运行模式 (Mode)</label>
                                    <select id="server-mode"
                                        class="form-select w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                        <option value="debug">Debug (开发模式)</option>
                                        <option value="release">Release (生产模式)</option>
                                        <option value="test">Test (测试模式)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">读取超时 (Read Timeout)</label>
                                    <input type="text" id="server-read-timeout"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="30s">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">写入超时 (Write
                                        Timeout)</label>
                                    <input type="text" id="server-write-timeout"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="30s">
                                </div>
                            </div>
                            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                    <div>
                                        <span class="block text-white font-medium">启用 CORS</span>
                                        <span class="text-xs text-muted">允许跨域资源共享</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="server-enable-cors" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                    <div>
                                        <span class="block text-white font-medium">启用 Swagger</span>
                                        <span class="text-xs text-muted">API 文档界面</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="server-enable-swagger" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 数据库配置 -->
                    <div id="database-section" class="config-section hidden space-y-6">
                        <!-- PostgreSQL -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-xl font-bold text-white flex items-center">
                                    <i class="fas fa-database text-blue-500 mr-3"></i>PostgreSQL 设置
                                </h3>
                                <button onclick="testDatabaseConnection()" class="btn btn-sm btn-secondary">
                                    <i class="fas fa-plug mr-1"></i>测试连接
                                </button>
                            </div>
                            <div id="database-test-result" class="hidden mb-4 p-3 rounded-lg text-sm"></div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">主机 (Host)</label>
                                    <input type="text" id="database-host"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">端口 (Port)</label>
                                    <input type="number" id="database-port"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">用户名 (User)</label>
                                    <input type="text" id="database-user"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">密码 (Password)</label>
                                    <input type="password" id="database-password"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">数据库名 (DB Name)</label>
                                    <input type="text" id="database-dbname"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">SSL 模式</label>
                                    <select id="database-sslmode"
                                        class="form-select w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                        <option value="disable">Disable</option>
                                        <option value="require">Require</option>
                                        <option value="verify-full">Verify Full</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mt-6 pt-6 border-t border-white/10">
                                <h4 class="text-sm font-bold text-white mb-4">连接池设置</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">最大打开连接数</label>
                                        <input type="number" id="database-max-open-conns"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">最大空闲连接数</label>
                                        <input type="number" id="database-max-idle-conns"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">连接最大生命周期(秒)</label>
                                        <input type="number" id="database-max-lifetime"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Redis -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-xl font-bold text-white flex items-center">
                                    <i class="fas fa-memory text-red-500 mr-3"></i>Redis 设置
                                </h3>
                                <button onclick="testRedisConnection()" class="btn btn-sm btn-secondary">
                                    <i class="fas fa-plug mr-1"></i>测试连接
                                </button>
                            </div>
                            <div id="redis-test-result" class="hidden mb-4 p-3 rounded-lg text-sm"></div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">主机 (Host)</label>
                                    <input type="text" id="redis-host"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">端口 (Port)</label>
                                    <input type="number" id="redis-port"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">密码 (Password)</label>
                                    <input type="password" id="redis-password"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">数据库索引 (DB)</label>
                                    <input type="number" id="redis-db"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 爬虫配置 -->
                    <div id="crawler-section" class="config-section hidden space-y-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-spider text-purple-500 mr-3"></i>爬虫通用设置
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">请求延迟 (Request
                                        Delay)</label>
                                    <input type="text" id="crawler-request-delay"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="2s">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">重试次数 (Retry Count)</label>
                                    <input type="number" id="crawler-retry-count"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">超时时间 (Timeout)</label>
                                    <input type="text" id="crawler-timeout"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">最大并发数 (Concurrent
                                        Max)</label>
                                    <input type="number" id="crawler-concurrent-max"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>

                            <div class="mt-6 pt-6 border-t border-white/10">
                                <h4 class="text-sm font-bold text-white mb-4">代理设置</h4>
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg mb-4">
                                    <div>
                                        <span class="block text-white font-medium">启用代理</span>
                                        <span class="text-xs text-muted">使用代理池进行爬取</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="crawler-proxy-enabled" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">代理列表</label>
                                    <div id="crawler-proxy-list" class="space-y-2 mb-2"></div>
                                    <button onclick="addProxy()" class="btn btn-sm btn-secondary w-full">
                                        <i class="fas fa-plus mr-1"></i>添加代理
                                    </button>
                                </div>
                            </div>

                            <div class="mt-6 pt-6 border-t border-white/10">
                                <h4 class="text-sm font-bold text-white mb-4">User Agents</h4>
                                <div class="form-group">
                                    <div id="crawler-user-agents" class="space-y-2 mb-2"></div>
                                    <button onclick="addUserAgent()" class="btn btn-sm btn-secondary w-full">
                                        <i class="fas fa-plus mr-1"></i>添加 User Agent
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 媒体库配置 -->
                    <div id="media-section" class="config-section hidden space-y-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-photo-video text-pink-500 mr-3"></i>本地媒体库
                            </h3>
                            <div class="grid grid-cols-1 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">基础路径 (Base Path)</label>
                                    <input type="text" id="media-base-path"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="/MediaCenter/NSFW">
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">扫描间隔 (小时)</label>
                                        <input type="number" id="media-scan-interval"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">最小文件大小 (MB)</label>
                                        <input type="number" id="media-min-file-size"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">最大文件大小 (MB)</label>
                                        <input type="number" id="media-max-file-size"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">支持的文件扩展名</label>
                                    <div id="media-supported-exts" class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-2">
                                    </div>
                                    <button onclick="addMediaExt()" class="btn btn-sm btn-secondary">
                                        <i class="fas fa-plus mr-1"></i>添加扩展名
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 下载配置 -->
                    <div id="download-section" class="config-section hidden space-y-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-download text-green-500 mr-3"></i>下载客户端设置
                            </h3>

                            <!-- Jackett -->
                            <div class="mb-8">
                                <h4 class="text-lg font-semibold text-white mb-4 border-l-4 border-orange-500 pl-3">
                                    Jackett (索引器)</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">API 地址 (Host)</label>
                                        <input type="text" id="torrent-jackett-host"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">API Key</label>
                                        <input type="password" id="torrent-jackett-api-key"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">超时时间</label>
                                        <input type="text" id="torrent-jackett-timeout"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">重试次数</label>
                                        <input type="number" id="torrent-jackett-retry-count"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                </div>
                            </div>

                            <!-- qBittorrent -->
                            <div class="mb-8">
                                <h4 class="text-lg font-semibold text-white mb-4 border-l-4 border-blue-500 pl-3">
                                    qBittorrent (下载器)</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">WebUI 地址 (Host)</label>
                                        <input type="text" id="torrent-qbittorrent-host"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">下载目录</label>
                                        <input type="text" id="torrent-qbittorrent-download-dir"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">用户名</label>
                                        <input type="text" id="torrent-qbittorrent-username"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">密码</label>
                                        <input type="password" id="torrent-qbittorrent-password"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                </div>
                            </div>

                            <!-- 搜索设置 -->
                            <div>
                                <h4 class="text-lg font-semibold text-white mb-4 border-l-4 border-purple-500 pl-3">搜索偏好
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">最大结果数</label>
                                        <input type="number" id="torrent-search-max-results"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="form-group">
                                        <label class="block text-sm font-medium text-muted mb-2">最小做种数</label>
                                        <input type="number" id="torrent-search-min-seeders"
                                            class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                        <div>
                                            <span class="block text-white font-medium">按大小排序</span>
                                            <span class="text-xs text-muted">优先下载大文件</span>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="torrent-search-sort-by-size"
                                                class="sr-only peer">
                                            <div
                                                class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 通知配置 -->
                    <div id="notification-section" class="config-section hidden space-y-6">
                        <!-- Telegram -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-xl font-bold text-white flex items-center">
                                    <i class="fab fa-telegram text-blue-400 mr-3"></i>Telegram Bot
                                </h3>
                                <div class="flex gap-2">
                                    <button onclick="testTelegramConnection()" class="btn btn-sm btn-secondary">
                                        <i class="fas fa-plug mr-1"></i>测试连接
                                    </button>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="telegram-enabled" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div id="telegram-test-result" class="hidden mb-4 p-3 rounded-lg text-sm"></div>

                            <div class="grid grid-cols-1 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">Bot Token</label>
                                    <input type="password" id="telegram-token"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">Webhook URL (可选)</label>
                                    <input type="text" id="telegram-webhook-url"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">管理员 ID 列表 (每行一个)</label>
                                    <textarea id="telegram-admin-ids" rows="3"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"></textarea>
                                </div>
                            </div>

                            <!-- 通知设置 -->
                            <div class="mt-6 pt-6 border-t border-white/10">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="text-sm font-bold text-white">通知推送</h4>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="notification-telegram-enabled" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">接收通知的 Chat ID</label>
                                    <input type="text" id="notification-telegram-chat-id"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-xl font-bold text-white flex items-center">
                                    <i class="fas fa-envelope text-yellow-500 mr-3"></i>邮件通知
                                </h3>
                                <div class="flex gap-2">
                                    <button onclick="testEmailConnection()" class="btn btn-sm btn-secondary">
                                        <i class="fas fa-plug mr-1"></i>测试连接
                                    </button>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="notification-email-enabled" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div id="email-test-result" class="hidden mb-4 p-3 rounded-lg text-sm"></div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">SMTP 服务器</label>
                                    <input type="text" id="notification-email-smtp-host"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">SMTP 端口</label>
                                    <input type="number" id="notification-email-smtp-port"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">用户名</label>
                                    <input type="text" id="notification-email-username"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">密码</label>
                                    <input type="password" id="notification-email-password"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">发件人地址</label>
                                    <input type="text" id="notification-email-from"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>

                            <div class="mt-6 pt-6 border-t border-white/10">
                                <h4 class="text-sm font-bold text-white mb-4">收件人列表</h4>
                                <div id="notification-email-to" class="space-y-2 mb-2"></div>
                                <button onclick="addEmailTo()" class="btn btn-sm btn-secondary">
                                    <i class="fas fa-plus mr-1"></i>添加收件人
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 安全配置 -->
                    <div id="security-section" class="config-section hidden space-y-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-shield-alt text-green-500 mr-3"></i>安全设置
                            </h3>

                            <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg mb-6">
                                <div>
                                    <span class="block text-white font-medium">启用身份验证</span>
                                    <span class="text-xs text-muted">API 请求需要 JWT Token</span>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="security-enable-auth" class="sr-only peer">
                                    <div
                                        class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                    </div>
                                </label>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">JWT Secret</label>
                                    <input type="password" id="security-jwt-secret"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">JWT 过期时间</label>
                                    <input type="text" id="security-jwt-expiry"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white"
                                        placeholder="24h">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">密码盐值 (Salt)</label>
                                    <input type="password" id="security-password-salt"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">速率限制 (RPS)</label>
                                    <input type="number" id="security-rate-limit-rps"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>

                            <div class="mt-6 pt-6 border-t border-white/10">
                                <h4 class="text-sm font-bold text-white mb-4">允许的 IP 列表 (白名单)</h4>
                                <div id="security-allowed-ips" class="space-y-2 mb-2"></div>
                                <button onclick="addAllowedIP()" class="btn btn-sm btn-secondary">
                                    <i class="fas fa-plus mr-1"></i>添加 IP
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 高级配置 -->
                    <div id="advanced-section" class="config-section hidden space-y-6">
                        <!-- 日志设置 -->
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-file-alt text-gray-400 mr-3"></i>日志设置
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">日志级别</label>
                                    <select id="log-level"
                                        class="form-select w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                        <option value="debug">Debug</option>
                                        <option value="info">Info</option>
                                        <option value="warn">Warn</option>
                                        <option value="error">Error</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">输出格式</label>
                                    <select id="log-format"
                                        class="form-select w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                        <option value="json">JSON</option>
                                        <option value="text">Text</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">输出目标</label>
                                    <select id="log-output"
                                        class="form-select w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                        <option value="stdout">Stdout</option>
                                        <option value="file">File</option>
                                        <option value="both">Both</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">日志文件名</label>
                                    <input type="text" id="log-filename"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>

                            <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">最大文件大小 (MB)</label>
                                    <input type="number" id="log-max-size"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">最大备份数</label>
                                    <input type="number" id="log-max-backups"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                                <div class="form-group">
                                    <label class="block text-sm font-medium text-muted mb-2">最大保留天数</label>
                                    <input type="number" id="log-max-age"
                                        class="form-input w-full bg-input border-transparent focus:border-primary rounded-lg px-4 py-2 text-white">
                                </div>
                            </div>

                            <div class="mt-6">
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                    <div>
                                        <span class="block text-white font-medium">压缩旧日志</span>
                                        <span class="text-xs text-muted">节省磁盘空间</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="log-compress" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 开发设置 -->
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                                <i class="fas fa-code text-blue-400 mr-3"></i>开发选项
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                    <div>
                                        <span class="block text-white font-medium">启用调试路由</span>
                                        <span class="text-xs text-muted">开启 /debug/pprof 等端点</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="dev-enable-debug-routes" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                    <div>
                                        <span class="block text-white font-medium">启用性能分析</span>
                                        <span class="text-xs text-muted">收集运行时性能数据</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="dev-enable-profiling" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-white/5 rounded-lg">
                                    <div>
                                        <span class="block text-white font-medium">自动重载</span>
                                        <span class="text-xs text-muted">配置文件变更时自动重启服务</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="dev-auto-reload" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </main>
        </div>
    </div>

    <script src="static/js/components.js"></script>
    <script src="static/js/sidebar.js"></script>
    <script src="static/js/config.js"></script>
</body>

</html>